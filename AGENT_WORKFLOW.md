# Autonomous Agent Workflow Specification

## 1. Problem Statement
To enable an autonomous AI agent to contribute to this project, a clear, repeatable workflow is required. This document specifies the exact process the agent must follow to select a task, perform the work, and submit it for review via a pull request. The goal is to automate contributions while maintaining project quality and adhering to git best practices.

## 2. Agent Trigger
The agent's workflow is initiated by a manual trigger or a scheduled event (e.g., a nightly GitHub Actions run).

## 3. Workflow Steps

### Step 1: Synchronization
1.  Clone the project repository to a clean, temporary environment.
2.  Check out the `main` branch.
3.  Pull the latest changes to ensure the local version is up-to-date.

### Step 2: Task Selection
1.  Parse the `TASKS.md` file.
2.  Identify all tasks with the status ` - ` (Pending).
3.  For each pending task, check its `Dependencies`. A task is eligible for selection only if all its listed dependencies have a status of `+` (Completed).
4.  From the list of eligible tasks, select the one with the lowest `ID`.
5.  If no tasks are eligible, the process terminates.

### Step 3: Task Execution
1.  Create a new branch. The branch name must follow the format `agent/task-<ID>`, where `<ID>` is the ID of the selected task. Example: `agent/task-7`.
2.  Analyze the `Action` and `Acceptance` criteria of the selected task to determine the required changes.
    - If `Acceptance` specifies the creation of a new file (e.g., "`NEW_FILE.md` exists"), the agent will create that file.
    - If `Acceptance` specifies a change to an existing file, the agent will modify that file.
3.  Generate the content for the new or modified files based on the task's `Action`. The agent will use its understanding of the project's existing documents and principles to create a compliant and high-quality result.
4.  Modify the status of the task in `TASKS.md` from `-` (Pending) to `~` (In Progress).

### Step 4: Commit and Pull Request
1.  Stage all the changes (new, modified files, and the update to `TASKS.md`).
2.  Create a single commit. The commit message must follow this format:
    ```
    feat(agent): Complete Task <ID> - <Task Title>

    Resolves #<ID>
    ```
    Example: `feat(agent): Complete Task 7 - Implement Git Script`
3.  Push the new branch to the remote repository.
4.  Create a Pull Request (PR) targeting the `main` branch.
    - **PR Title:** Same as the commit message title.
    - **PR Body:**
      ```markdown
      This PR was automatically generated by the autonomous agent to complete Task #<ID>.

      ## Task Description
      > <Copy the full "Action" description from the task here>

      ## Acceptance Criteria Checklist
      - [x] <Copy the first "Acceptance" criterion here>
      - [x] <Copy the second "Acceptance" criterion here>
      ```

## 4. Required Tools and Permissions
- **Environment:** A containerized environment with `git` and the agent's core software installed.
- **Authentication:** A GitHub Personal Access Token (PAT) or a GitHub App token.
- **Permissions:** The token must grant the following repository permissions:
  - `contents: write` (to read files, commit changes, and push branches)
  - `pull-requests: write` (to create pull requests)

## 5. Failure and Edge Cases
- **No Eligible Tasks:** If no pending tasks have their dependencies met, the agent will log a message and exit gracefully.
- **Git Command Failure:** If any `git` command fails (e.g., push fails due to a conflict), the agent will clean up the local environment (delete the temporary repository clone) and report the failure in its logs. The task status in the remote `TASKS.md` will remain unchanged.
- **PR Creation Failure:** If the PR creation fails, the agent will log the error and exit. The branch will have been pushed, allowing for manual PR creation if necessary.